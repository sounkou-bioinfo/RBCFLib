% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/BCFToolsPipeline.R
\name{BCFToolsPipeline}
\alias{BCFToolsPipeline}
\title{Create a pipeline of multiple BCFTools commands}
\usage{
BCFToolsPipeline(
  ...,
  catchStdout = TRUE,
  catchStderr = TRUE,
  saveStdout = NULL
)
}
\arguments{
\item{...}{A series of command specifications, where each specification consists of:
\itemize{
\item A character string specifying the bcftools command
\item A character vector of arguments for the command
}}

\item{catchStdout}{Logical; whether to capture standard output from the last command (default: TRUE)}

\item{catchStderr}{Logical; whether to capture standard error from all commands (default: TRUE)}

\item{saveStdout}{Character; file path where to save standard output, or NULL (default: NULL)}
}
\value{
A named list with elements:
\describe{
\item{status}{Integer vector with exit statuses of all commands (0 for success, non-zero for errors)}
\item{stdout}{Character vector of captured standard output lines from the last command, or NULL if not captured}
\item{stderr}{Character vector of captured standard error lines from all commands, or NULL if not captured}
\item{command}{Character vector representing the full piped bcftools command sequence invoked}
}
}
\description{
Executes a sequence of bcftools commands in a pipeline, where the output of each command
is used as input for the next command, similar to chaining multiple Unix pipe operators (|).
}
\details{
The function automatically validates that -o/--output options are only used in the last
command of the pipeline and only for commands that support output redirection.

\strong{Output Handling:}
\itemize{
\item Only the last command in the pipeline can contain -o/--output/--output-file arguments
\item Commands that don't support -o/--output options:  index, roh, stats
\item If -o/--output is used in any non-final command, an error will be thrown
\item If -o/--output is used with unsupported commands, an error will be thrown
}
}
\examples{
\dontrun{
# Pipeline of three commands: view, filter, annotate
vcfFile <- system.file("exdata", "imputed.gt.vcf.gz", package = "RBCFLib")
result <- BCFToolsPipeline(
  "view", c("-r", "chr1:1000-2000", vcfFile),
  "view", c("-i", "QUAL>20"),
  "annotate", c("-x", "INFO")
)

# Filter, sort and output to file (only last command has -o)
outFile <- tempfile(fileext = ".vcf.gz")
BCFToolsPipeline(
  "view", c("-i", "'DP>30'", vcfFile),
  "sort", character(),
  "view", c("-Oz", "-o", outFile)
)

# INVALID: -o in non-final command (will throw error)
# BCFToolsPipeline(
#   "view", c("-o", "temp.vcf", vcfFile),  # ERROR: -o not allowed here
#   "sort", character()
# )

# INVALID: -o with unsupported command (will throw error)
# BCFToolsPipeline(
#   "view", c(vcfFile),
#   "stats", c("-o", "stats.txt")  # ERROR: stats doesn't support -o
# )
}

}
